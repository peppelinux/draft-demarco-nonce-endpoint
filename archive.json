{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2023-12-28T00:27:57.606335+00:00",
  "repo": "peppelinux/draft-demarco-nonce-endpoint",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 1,
      "id": "I_kwDOKus-lM53Yv9d",
      "title": "Review",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/issues/1",
      "state": "OPEN",
      "author": "peppelinux",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "- [ ] The proposed solution assumes that the interaction starts with the client interacting with the server without a nonce. As a result, an error code is returned with the nonce endpoint details and the client is then expected to interact with the nonce endpoint, obtain a new nonce, and then retry the request with the nonce.\r\n\r\n- [ ] The document should describe a flow that would allow the client to initially go directly to the nonce endpoint to obtain a nonce before contacting the server, to avoid the error case.\r\n\r\n- [ ] the document should describe a flow that would allow a valid response to a request with a valid nonce to return a new nonce that could be used with subsequent requests to avoid the need for a new request to the nonce endpoint, as an optimization to reduce latency in load situations.\r\n\r\n- [ ] The document should also add this new endpoint to the \"OAuth Authorization Server Metadata\" registry.",
      "createdAt": "2023-11-20T20:44:49Z",
      "updatedAt": "2023-11-20T20:44:49Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 2,
      "id": "I_kwDOKus-lM53dFuY",
      "title": "Nonce requirements",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/issues/2",
      "state": "OPEN",
      "author": "fmarino-ipzs",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "The main basic security requirements for the Nonce are:\r\n\r\n1. It MUST be **unguessable**.\r\n2. It MUST be used **once** and for a **short time**.\r\n\r\nThe first requirement can be achieved either by:\r\n- (Cryptographic) Randomness or\r\n- Encryption\r\n",
      "createdAt": "2023-11-21T11:55:40Z",
      "updatedAt": "2023-11-21T23:49:32Z",
      "closedAt": null,
      "comments": [
        {
          "author": "peppelinux",
          "authorAssociation": "OWNER",
          "body": "Ok, please include them in a PR and include yourself as author as well",
          "createdAt": "2023-11-21T23:47:27Z",
          "updatedAt": "2023-11-21T23:47:42Z"
        },
        {
          "author": "peppelinux",
          "authorAssociation": "OWNER",
          "body": "If we Say that It must be encrypted the randomness doesn't remove the encryption\r\n\r\nThen, instead of OR It should be AND unless the WG decides differently",
          "createdAt": "2023-11-21T23:49:02Z",
          "updatedAt": "2023-11-21T23:49:32Z"
        }
      ]
    },
    {
      "number": 6,
      "id": "I_kwDOKus-lM532tKI",
      "title": "payload must include a random value",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/issues/6",
      "state": "OPEN",
      "author": "peppelinux",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "two different http requests to the nonce endpoint MUST generate responses containing two different nonces, because it must not be possibile to obtain the same nonce in the multiverse of the nonces.\r\n\r\na random value in the payload MUST be always provided to increase the security, aside the iat, exp ...\r\n\r\niat and exp alone cannot prevent that the same encrypted nonce would be provided if two concurrent requests happens in the same time",
      "createdAt": "2023-11-25T23:36:46Z",
      "updatedAt": "2023-11-25T23:36:46Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 7,
      "id": "I_kwDOKus-lM532tPJ",
      "title": "This endpoint doesn't represent any mitigation againts the replay attacks",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/issues/7",
      "state": "OPEN",
      "author": "peppelinux",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "writing this draft I found the evidence that there was a false assumption about how the nonce would be better than jti (using client_id+jti-value) in preventing replay attacks when the nonces doesn't requires a shared storage.\r\n\r\nit seems so evident right now that even if the nonce is encrypted and not shared between multiple nodes, this doesn't prevent the replay attacks if, once issued and used to a specific endpoint by a client, it must then be saved in a shared storage between the nodes to actually prevents replay attacks.\r\n\r\nThen all the assumption about how the nonce is considered more smart and scalable than the jti failed.\r\n\r\nwe can only say that nonce is issued by AS while jti by client, but against the replay attacks a shared storage between the nodes MUST always be provided.",
      "createdAt": "2023-11-25T23:38:50Z",
      "updatedAt": "2023-11-25T23:38:50Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 8,
      "id": "I_kwDOKus-lM55KGzU",
      "title": "SPICE challenge endpoint",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/issues/8",
      "state": "OPEN",
      "author": "peppelinux",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "The following is SPICE defining a spice-challenge endpoint:\r\n\r\nhttps://github.com/transmute-industries/dune/pull/1/files#diff-e854808af98ab6ffb0609f6573aa357a0bcd4a574df72074cc120b96a613ceedR8\r\n\r\nOpenPubkey using nonce in some specific way (Hash of a set of claims) to get the IDPs to sign it without requiring any changes on the IDP\r\n\r\nhttps://www.bastionzero.com/openpubkey\r\n\r\n@asharif1990",
      "createdAt": "2023-12-08T13:50:54Z",
      "updatedAt": "2023-12-08T13:50:54Z",
      "closedAt": null,
      "comments": []
    }
  ],
  "pulls": [
    {
      "number": 3,
      "id": "PR_kwDOKus-lM5gBYNX",
      "title": "Editorial and Update on the Requirements",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/pull/3",
      "state": "CLOSED",
      "author": "asharif1990",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "I made a pass on the whole document by improving the text and making some changes to the non-normative examples and the requirements. ",
      "createdAt": "2023-11-21T13:29:16Z",
      "updatedAt": "2023-11-21T13:52:15Z",
      "baseRepository": "peppelinux/draft-demarco-nonce-endpoint",
      "baseRefName": "main",
      "baseRefOid": "d9e38880a527bf4eefd7425e12674e8e77967104",
      "headRepository": "asharif1990/draft-demarco-nonce-endpoint",
      "headRefName": "main",
      "headRefOid": "e18f99819d2e92a3d8bb2f945f27f52b32f8501d",
      "closedAt": "2023-11-21T13:52:15Z",
      "mergedAt": null,
      "mergedBy": null,
      "mergeCommit": null,
      "comments": [],
      "reviews": []
    },
    {
      "number": 4,
      "id": "PR_kwDOKus-lM5gBlIx",
      "title": "[Editorial and update the requirements]",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/pull/4",
      "state": "MERGED",
      "author": "asharif1990",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "Editorial and update the requirements",
      "createdAt": "2023-11-21T13:59:45Z",
      "updatedAt": "2023-11-21T15:42:00Z",
      "baseRepository": "peppelinux/draft-demarco-nonce-endpoint",
      "baseRefName": "main",
      "baseRefOid": "d9e38880a527bf4eefd7425e12674e8e77967104",
      "headRepository": "asharif1990/draft-demarco-nonce-endpoint",
      "headRefName": "Revision",
      "headRefOid": "a35ad8e357ec01157336d4290e35b96b474cc857",
      "closedAt": "2023-11-21T15:41:59Z",
      "mergedAt": "2023-11-21T15:41:59Z",
      "mergedBy": "peppelinux",
      "mergeCommit": {
        "oid": "601b21c19bbdd0875066fc471a4366c1528f672d"
      },
      "comments": [],
      "reviews": [
        {
          "id": "PRR_kwDOKus-lM5n2gOc",
          "commit": {
            "abbreviatedOid": "102d7d2"
          },
          "author": "peppelinux",
          "authorAssociation": "OWNER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2023-11-21T15:40:36Z",
          "updatedAt": "2023-11-21T15:40:37Z",
          "comments": [
            {
              "originalPosition": 63,
              "body": "```suggestion\r\nthe Authorization Server MUST return an HTTP response with the HTTP status code `400` and an `error` field with the value set to `\"nonce_required\"`.\r\n```",
              "createdAt": "2023-11-21T15:40:36Z",
              "updatedAt": "2023-11-21T15:40:37Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOKus-lM5n2g2K",
          "commit": {
            "abbreviatedOid": "102d7d2"
          },
          "author": "peppelinux",
          "authorAssociation": "OWNER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2023-11-21T15:41:30Z",
          "updatedAt": "2023-11-21T15:41:31Z",
          "comments": [
            {
              "originalPosition": 111,
              "body": "in the consideration we don't require normative terms like MUST and so on ... just FYI",
              "createdAt": "2023-11-21T15:41:31Z",
              "updatedAt": "2023-11-21T15:41:31Z"
            }
          ]
        },
        {
          "id": "PRR_kwDOKus-lM5n2hJL",
          "commit": {
            "abbreviatedOid": "a35ad8e"
          },
          "author": "peppelinux",
          "authorAssociation": "OWNER",
          "state": "APPROVED",
          "body": "",
          "createdAt": "2023-11-21T15:41:49Z",
          "updatedAt": "2023-11-21T15:41:49Z",
          "comments": []
        }
      ]
    },
    {
      "number": 5,
      "id": "PR_kwDOKus-lM5gC4_g",
      "title": "fix build error",
      "url": "https://github.com/peppelinux/draft-demarco-nonce-endpoint/pull/5",
      "state": "MERGED",
      "author": "fmarino-ipzs",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "This PR fixes a build error (nl at the end of the file).",
      "createdAt": "2023-11-21T16:43:54Z",
      "updatedAt": "2023-11-21T23:46:44Z",
      "baseRepository": "peppelinux/draft-demarco-nonce-endpoint",
      "baseRefName": "main",
      "baseRefOid": "601b21c19bbdd0875066fc471a4366c1528f672d",
      "headRepository": "fmarino-ipzs/draft-demarco-nonce-endpoint",
      "headRefName": "patch-1",
      "headRefOid": "63417e967fb74d5a451a366a37d85bf5bd7107ca",
      "closedAt": "2023-11-21T23:46:44Z",
      "mergedAt": "2023-11-21T23:46:44Z",
      "mergedBy": "peppelinux",
      "mergeCommit": {
        "oid": "28ac702f50189d54985a8e57ebe69c96bcd619c1"
      },
      "comments": [],
      "reviews": []
    }
  ]
}